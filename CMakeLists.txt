cmake_minimum_required(VERSION 3.22.1)
project(HelloWorld)
include(CTest)
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_SOURCE_DIR ./src/)
set(BINARY_DIR ./bin/)
set(LIB_DIR ${BINARY_DIR}/lib/)

set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${LIB_DIR}/so/)
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${LIB_DIR}/static/)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${BINARY_DIR})
file(GLOB STATIC_LIB_FILES ${${LIB_DIR}/static/}/*.a)
file(GLOB SRC_FILES ${CMAKE_SOURCE_DIR}/*.cpp)
link_directories(${LIB_DIR}/static/)
add_test(HelloWorld ${BINARY_DIR}/HelloWorld)
add_executable(HelloWorld ${SRC_FILES})
target_link_libraries(HelloWorld ${STATIC_LIB_FILES})